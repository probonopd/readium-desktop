esudo: false
branches:
  except:
  - # Do not build tags that we create when we upload to GitHub Releases
  - /^(?i:continuous)$/
#  only:
#  - master
#  - develop
language: node_js
node_js:
- '7'
before_install:
- 'pwd && ls -als'
- npm -g install npm@latest
install:
- 'pwd && ls -als'
before_script:
- 'pwd && ls -als'
- 'npm install'
script:
- 'npm run lint'
- 'npm run build'
- 'npm run package' # https://github.com/electron-userland/electron-builder/issues/504#issuecomment-326737539
after_success:
- 'pwd && ls -als'
- wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
- bash upload.sh out/*
- 'release/readium-desktop-*.AppImage
after_failure:
- 'pwd && ls -als'
