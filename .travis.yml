esudo: false
branches:
  except:
  - # Do not build tags that we create when we upload to GitHub Releases
  - /^(?i:continuous)$/
#  only:
#  - master
#  - develop
language: node_js
node_js:
- '7'
before_install:
- 'pwd && ls -als'
- npm -g install npm@latest
install:
- 'pwd && ls -als'
before_script:
- 'pwd && ls -als'
- 'npm install'
script:
- 'npm run lint'
- 'npm run build'
- 'npm run build && build -mwl'
after_success:
- 'pwd && ls -als'
- wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
- bash upload.sh release/readium-desktop-*
after_failure:
- 'pwd && ls -als'
